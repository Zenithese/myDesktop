(this["webpackJsonpreact-desktop"]=this["webpackJsonpreact-desktop"]||[]).push([[0],{19:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},34:function(e,t,n){},36:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),i=n.n(a),s=n(20),r=n.n(s),o=(n(26),n(8)),l=n(4),u=n(2),d=(n(27),n(17));n(28);function p(e){var t=e.array,n=e.parentClassName,i=e.directionReveal,s=e.folders,r=e.setFolders,o=e.setBackground,p=e.setOpened,b=Object(a.useState)([]),j=Object(u.a)(b,2),m=j[0],g=j[1],h=Object(a.useState)(!0),O=Object(u.a)(h,2),v=O[0],x=O[1],y=0;Object(a.useEffect)((function(){g((function(e){return[].concat(Object(d.a)(e),["closed"])}))}),[y]);var w=t.map((function(e,t){return"li"===e.type?Object(c.jsx)("div",{className:"contextmenu",id:e.id,onClick:function(e){return function(e){if("New Folder"===e.target.innerHTML){var t=Object(l.a)({},s),n=Math.floor(1e15*Math.random());if("App"===e.target.id.slice(3))t[n]={top:e.pageY,left:e.pageX,title:"New Folder",parent:null,children:[],contentX:null,contentY:null,contentWidth:300,contentHeight:300};else{var c=Number(e.target.id.slice(5));t[n]={top:e.pageY,left:e.pageX,title:"New Folder",parent:c,children:[],open:!1,contentX:null,contentY:null,contentWidth:300,contentHeight:300},t[c].children.push(n)}r(t)}else if("Delete Folder"===e.target.innerHTML||"Delete File"===e.target.innerHTML){var a=Object(l.a)({},s);!function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.target.id,c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a[n].children&&a[n].children.forEach((function(e){a[e].children&&t(e,!1),p((function(t){return t.filter((function(t){return t!=e}))})),delete a[e]})),c&&("Delete File"===e.target.innerHTML?a[n].parent&&(a[a[n].parent].children=a[a[n].parent].children.filter((function(e){return e!==n}))):a[n].parent&&(a[a[n].parent].children=a[a[n].parent].children.filter((function(e){return e!==Number(n)}))),p((function(e){return e.filter((function(e){return e!=n}))})),delete a[n],r(a))}()}else"Classic Windows"===e.target.innerHTML?o("App background-1"):"Oranges"===e.target.innerHTML?o("App background-2"):"Sky"===e.target.innerHTML&&o("App background-3")}(e)},children:e.text},t):"li with context"===e.type?(y++,Object(c.jsx)(f,{text:e.text,array:e.array,parentClassName:n,openContexts:m,setOpenContexts:g,num:y-1,update:v,setUpdate:x,directionReveal:i,setBackground:o,setOpened:p},t)):null}));return Object(c.jsx)("div",{className:i,children:w})}function f(e){var t=e.text,n=e.array,i=e.parentClassName,s=e.openContexts,r=e.num,o=e.setOpenContexts,l=e.update,d=e.setUpdate,f=e.directionReveal,b=e.setBackground,j=e.setOpened,m=Object(a.useState)("contextmenu"),g=Object(u.a)(m,2),h=g[0],O=g[1];Object(a.useEffect)((function(){"contextmenu"===i&&O("contextmenu")}),[i]),Object(a.useEffect)((function(){"closed"===s[r]&&O("contextmenu")}),[l,s,r]);var v=function(){O("selector"),o((function(e){for(var t=0;t<e.length;t++)e[t]=t===r?"open":"closed";return e})),d(!l)};return Object(c.jsxs)("div",{className:"more-context",onMouseOver:function(){return v()},children:[Object(c.jsx)("div",{className:h,onMouseOver:function(){return v()},onMouseLeave:function(e){return function(e){"contextmenu"!==e.target.className&&(O("contextmenu"),s[r]="closed")}(e)},children:t+" =>"}),Object(c.jsx)("div",{className:"nested-context",children:Object(c.jsx)(p,{array:n,parentClassName:h,directionReveal:f,setBackground:b,setOpened:j})})]})}n(29);var b=n(14),j=n.n(b),m=n(7);function g(e){var t=e.left,n=e.top,i=e.title,s=e.parent,r=e.id,o=e.folders,p=e.setFolders,f=e.dimensions,b=e.opened,g=e.setOpened,h=Object(a.useRef)(null),O=Object(a.useState)(i),v=Object(u.a)(O,2),x=v[0],y=v[1],w=Object(a.useState)("droppable folder"),S=Object(u.a)(w,2),N=S[0],k=S[1],M=Object(a.useState)(0),C=Object(u.a)(M,2),E=C[0],D=C[1],L=Object(a.useState)(0),A=Object(u.a)(L,2),F=A[0],T=A[1],X=Object(a.useState)(s?"grid":"fixed"),Y=Object(u.a)(X,2),I=Y[0],B=Y[1],H=Object(a.useState)(t),R=Object(u.a)(H,2),W=R[0],q=R[1],U=Object(a.useState)(n),z=Object(u.a)(U,2),J=z[0],P=z[1],V=Object(a.useState)("0"),G=Object(u.a)(V,2),_=G[0],K=G[1],Q=Object(a.useState)(null),Z=Object(u.a)(Q,2),$=Z[0],ee=Z[1],te=Object(a.useState)([0,0]),ne=Object(u.a)(te,2),ce=ne[0],ae=ne[1],ie=Object(a.useState)(!1),se=Object(u.a)(ie,2),re=se[0],oe=se[1];Object(a.useEffect)((function(){var e=!0;if(re&&$&&e){if($.id.slice(2)===h.current.id.slice(2))return q(ce[0]),P(ce[1]),$.className=$.className.slice(8),void ee(null);var t=$.className.split(" "),n=Object(l.a)({},o);return n[n[r].parent]&&(n[n[r].parent].children=n[n[r].parent].children.filter((function(e){return e!==r}))),"droppable"===t[1]?(n[$.id.slice(2)].children.push(Number(r)),n[r].parent=Number($.id.slice(2)),B(null),p(n),$.className=$.className.slice(8)):"App"===$.id&&(n[r].parent=null,n[r].top=J,n[r].left=W,p(n)),oe(!1),function(){e=!1}}})),Object(a.useEffect)((function(){F&&(document.addEventListener("mousemove",le),document.addEventListener("mouseup",ue))}),[F]),Object(a.useEffect)((function(){null===I?(P($.getBoundingClientRect().top),q($.getBoundingClientRect().left+3),B("grid")):"fixed"===I&&null!==s&&document.querySelector(".App").appendChild(h.current)}),[I]);var le=function(e){e.preventDefault(),"fixed"!==I&&B("fixed"),h.current&&(P(Math.min(Math.max(0,e.pageY-F),document.body.clientHeight-h.current.offsetHeight)),q(Math.min(Math.max(0,e.pageX-E),document.body.clientWidth-h.current.offsetWidth))),de(e)},ue=function e(t){t.preventDefault(),null!==s&&document.getElementById("c-".concat(s))&&"App"===t.target.parentElement.parentElement.parentElement.id&&document.getElementById("c-".concat(s)).appendChild(h.current),oe(!0),D(0),T(0),K("0"),k("droppable folder"),$||s||ee(document.querySelector(".App")),document.removeEventListener("mousemove",le),document.removeEventListener("mouseup",e)},de=function(e){e.preventDefault();var t=e.target.parentElement?e.target.parentElement.parentElement:null;if(t){t.hidden=!0;var n=document.elementFromPoint(e.clientX,e.clientY);(n=n.closest(".droppable"))?"current"!==n.className.slice(0,7)&&(n.className="current "+n.className,ee(n)):(n=document.querySelector(".current"))&&(n.className=n.className.slice(8),ee(document.querySelector(".App"))),t.hidden=!1}},pe=Object(a.useCallback)(Object(m.debounce)((function(e){var t=Object(l.a)({},o);t[r].title=e,p(t)}),500),[]);return Object(c.jsxs)("div",{id:"f-".concat(r),ref:h,className:N,style:{position:I,top:Math.min(J,f.height-94),left:Math.min(W,f.width-94),zIndex:_},children:[Object(c.jsx)("div",{className:"folder-image-container",children:Object(c.jsx)("img",{draggable:"false",id:r,className:"folder-image",alt:"",src:"http://icon-park.com/imagefiles/folder_icon_yellow.png",onMouseDown:function(e){return function(e){ae([W,J]),k("folder"),K("1000"),D(e.pageX-e.target.getBoundingClientRect().left+5),T(e.pageY-e.target.getBoundingClientRect().top+5)}(e)},onDoubleClick:function(){b.includes(Number(r))||g((function(e){return[].concat(Object(d.a)(e),[Number(r)])}))}})}),Object(c.jsx)("div",{className:"folder-name-container",children:Object(c.jsx)(j.a,{id:"input",html:x,"data-column":"item",className:"content-editable",onChange:function(e){return function(e){var t=e.target.value.replace(/&nbsp;/g," ");y(t),pe(t.length?t:null)}(e)}})})]})}n(19);function h(e){var t=e.id,n=e.width,i=e.setWidth,s=e.height,r=e.setHeight,o=e.setX,d=e.setY,p=e.folders,f=e.setFolders,b=Object(a.useState)(null),j=Object(u.a)(b,2),m=j[0],g=j[1],h=Object(a.useState)(null),O=Object(u.a)(h,2),v=O[0],x=O[1],y=Object(a.useState)(null),w=Object(u.a)(y,2),S=w[0],N=w[1],k=Object(a.useState)(null),M=Object(u.a)(k,2),C=M[0],E=M[1],D=Object(a.useState)(null),L=Object(u.a)(D,2),A=L[0],F=L[1],T=Object(a.useState)(0),X=Object(u.a)(T,2),Y=X[0],I=X[1],B=Object(a.useState)(0),H=Object(u.a)(B,2),R=H[0],W=H[1],q=Object(a.useState)(!1),U=Object(u.a)(q,2),z=U[0],J=U[1];Object(a.useEffect)((function(){if(z){var e=Object(l.a)({},p);e[t.slice(2)].contentWidth=n,e[t.slice(2)].contentHeight=s,f(e),J(!1)}})),Object(a.useEffect)((function(){m&&(document.addEventListener("mousemove",P),document.addEventListener("mouseup",V))}),[m]);var P=function(e){e.preventDefault(),"side-top"===m?(r(Math.max(A-e.pageY+S,150)),d(Math.min(e.pageY-R,S+A-R-150))):"side-left"===m?(i(Math.max(C-e.pageX+v,150)),o(Math.min(e.pageX-Y,v+C-Y-150))):"side-right"===m?i(Math.max(C+e.pageX-v,150)):"side-bottom"===m?r(Math.max(A+e.pageY-S,150)):"corner-1"===m?(i(Math.max(C-e.pageX+v,150)),r(Math.max(A-e.pageY+S,150)),o(Math.min(e.pageX-Y,v+C-Y-150)),d(Math.min(e.pageY-R,S+A-R-150))):"corner-2"===m?(i(Math.max(C+e.pageX-v,150)),r(Math.max(A-e.pageY+S,150)),d(Math.min(e.pageY-R,S+A-R-150))):"corner-3"===m?(i(Math.max(C-e.pageX+v,150)),r(Math.max(A+e.pageY-S,150)),o(Math.min(e.pageX-Y,v+C-Y-150))):"corner-4"===m&&(i(Math.max(C+e.pageX-v,150)),r(Math.max(A+e.pageY-S,150)))},V=function e(t){t.preventDefault(),document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",e),g(null),J(!0)};return Object(c.jsxs)("div",{onMouseDown:function(e){return function(e){g(e.target.className),x(e.pageX),N(e.pageY),E(n),F(s),I(e.pageX-e.target.getBoundingClientRect().right),W(e.pageY-e.target.getBoundingClientRect().bottom)}(e)},children:[Object(c.jsx)("div",{className:"corner-1"}),Object(c.jsx)("div",{className:"corner-2"}),Object(c.jsx)("div",{className:"corner-3"}),Object(c.jsx)("div",{className:"corner-4"}),Object(c.jsx)("div",{className:"side-top",style:{width:n}}),Object(c.jsx)("div",{className:"side-left",style:{height:s}}),Object(c.jsx)("div",{className:"side-right",style:{height:s}}),Object(c.jsx)("div",{className:"side-bottom",style:{width:n}})]})}n(34);var O=n.p+"static/media/filledDrive.fe42fe8b.png",v="AIzaSyDMu1ATbmk6cgoJhD5oGeRihOsP314WOjY";function x(e){var t=e.id,n=e.title,i=e.parent,s=e.left,r=e.top,o=e.folders,d=e.setFolders,p=e.setCloseSearch,f=e.searchItem,b=e.webViewLink,g=e.iconLink,h=e.accessToken,x=e.dimensions,y=Object(a.useRef)(null),w=Object(a.useState)("file"),S=Object(u.a)(w,2),N=S[0],k=S[1],M=Object(a.useState)("file-name-container"),C=Object(u.a)(M,2),E=C[0],D=C[1],L=Object(a.useState)(null),A=Object(u.a)(L,2),F=A[0],T=A[1],X=Object(a.useState)(0),Y=Object(u.a)(X,2),I=Y[0],B=Y[1],H=Object(a.useState)(0),R=Object(u.a)(H,2),W=R[0],q=R[1],U=Object(a.useState)(i?"grid":"fixed"),z=Object(u.a)(U,2),J=z[0],P=z[1],V=Object(a.useState)(s),G=Object(u.a)(V,2),_=G[0],K=G[1],Q=Object(a.useState)(r),Z=Object(u.a)(Q,2),$=Z[0],ee=Z[1],te=Object(a.useState)("0"),ne=Object(u.a)(te,2),ce=ne[0],ae=ne[1],ie=Object(a.useState)(null),se=Object(u.a)(ie,2),re=se[0],oe=se[1],le=Object(a.useState)(!1),ue=Object(u.a)(le,2),de=ue[0],pe=ue[1],fe=Object(a.useState)(!1),be=Object(u.a)(fe,2),je=be[0],me=be[1],ge=Object(a.useState)([0,0]),he=Object(u.a)(ge,2),Oe=(he[0],he[1]);Object(a.useEffect)((function(){if(re&&je){var e=re.className.split(" "),c=Object(l.a)({},o),a=!0;de&&(null===c[t].parent?(alert("".concat(c[t].title," already exist on the desktop")),a=!1):re.id.slice(2)==c[t].parent?alert("".concat(c[t].title," already exist in this folder")):!c[c[t].parent]||window.confirm("".concat(c[t].title," already exist in folder ").concat(c[c[t].parent].title," -- move it?"))?console.log("replacing"):a=!1),c[t]?c[c[t].parent]&&(c[c[t].parent].children=c[c[t].parent].children.filter((function(e){return e!==t}))):c[t]={top:null,left:null,title:n,parent:null,type:"doc",webViewLink:b,iconLink:g},a?"droppable"===e[1]?(c[re.id.slice(2)].children.push(Number(t)?Number(t):t),c[t].parent=Number(re.id.slice(2)),P(null),d(c),re.className=re.className.slice(8)):"App"===re.id&&(c[t].parent=null,c[t].top=$,c[t].left=_,d(c)):d(c),f&&(document.getElementById("results-container").appendChild(y.current),ee(null),K(null)),me(!1)}})),Object(a.useEffect)((function(){W&&(document.addEventListener("mousemove",xe),document.addEventListener("mouseup",ye))}),[W]),Object(a.useEffect)((function(){null===J?(ee(re.getBoundingClientRect().top),K(re.getBoundingClientRect().left+3),P("grid")):"fixed"===J&&null!==i&&document.querySelector(".App").appendChild(y.current)}),[J]);var ve=function(e){o[t]&&e.target.closest(".keep-open")?pe(!0):de&&pe(!1),Oe([_,$]),k("file"),ae("1000"),B(e.pageX-e.target.getBoundingClientRect().left+5),q(e.pageY-e.target.getBoundingClientRect().top+5)},xe=function(e){e.preventDefault(),"fixed"!==J&&P("fixed"),y.current&&(ee(Math.min(Math.max(0,e.pageY-W),document.body.clientHeight-y.current.offsetHeight)),K(Math.min(Math.max(0,e.pageX-I),document.body.clientWidth-y.current.offsetWidth))),we(e)},ye=function e(t){t.preventDefault(),null!==i&&document.getElementById("c-".concat(i))&&"App"===t.target.parentElement.parentElement.parentElement.id&&document.getElementById("c-".concat(i)).appendChild(y.current),B(0),q(0),ae("0"),k("droppable file"),me(!0),re||i||oe(document.querySelector(".App")),document.removeEventListener("mousemove",xe),document.removeEventListener("mouseup",e)},we=function(e){e.preventDefault();var t=e.target.parentElement?e.target.parentElement.parentElement:null;if(t){t.hidden=!0;var n=document.elementFromPoint(e.clientX,e.clientY);document.getElementById("results-open")&&"results-container"!==n.className&&(p(!0),oe(document.querySelector(".App"))),(n=n.closest(".droppable"))?"current"!==n.className.slice(0,7)&&(n.className="current "+n.className,oe(n)):(n=document.querySelector(".current"))&&(n.className=n.className.slice(8),oe(document.querySelector(".App"))),t.hidden=!1}},Se=Object(a.useCallback)(Object(m.debounce)((function(e){return function(e,t){fetch("https://www.googleapis.com/drive/v3/files/".concat(e,"?key=").concat(v),{headers:{Authorization:"Bearer ".concat(h),"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(t)}),method:"PATCH"})}(t,e)}),500),[]);var Ne=function(){window.open(b)};return Object(c.jsxs)("div",{id:"d-".concat(t),ref:y,className:N,style:{position:J,top:Math.min($,x.height-94),left:Math.min(_,x.width-94),zIndex:ce},children:[Object(c.jsxs)("div",{className:"file-image-container",children:[Object(c.jsx)("img",{draggable:"false",id:t,className:"file-image",alt:"",src:O,onMouseDown:function(e){return ve(e)},onDoubleClick:function(){return Ne()}}),Object(c.jsx)("img",{draggable:"false",id:t,className:"file-icon",alt:"",src:g,onMouseDown:function(e){return ve(e)},onDoubleClick:function(){return Ne()}})]}),Object(c.jsx)("div",{className:E,children:Object(c.jsx)(j.a,{id:"input",html:F||n,"data-column":"item",className:"content-editable",onChange:function(e){return function(e){var t=e.target.value.replace(/&nbsp;/g," ");T(t),Se(t.length?t:null)}(e)},onFocus:function(){D("file-name-container-focus")},onBlur:function(){D("file-name-container")}})})]})}function y(e){var t=e.id,n=e.children,i=e.folders,s=e.setFolders,r=e.contentX,o=e.contentY,d=e.contentWidth,p=e.contentHeight,f=e.dimensions,b=e.opened,j=e.setOpened,m=e.accessToken,O=Object(a.useRef)(null),v=Object(a.useRef)(null),y=Object(a.useState)(""),w=Object(u.a)(y,2),S=w[0],N=w[1],k=Object(a.useState)(""),M=Object(u.a)(k,2),C=M[0],E=M[1],D=Object(a.useState)(0),L=Object(u.a)(D,2),A=L[0],F=L[1],T=Object(a.useState)(0),X=Object(u.a)(T,2),Y=X[0],I=X[1],B=Object(a.useState)(r),H=Object(u.a)(B,2),R=H[0],W=H[1],q=Object(a.useState)(o),U=Object(u.a)(q,2),z=U[0],J=U[1],P=Object(a.useState)("droppable contents"),V=Object(u.a)(P,2),G=V[0],_=V[1],K=Object(a.useState)(d),Q=Object(u.a)(K,2),Z=Q[0],$=Q[1],ee=Object(a.useState)(p),te=Object(u.a)(ee,2),ne=te[0],ce=te[1],ae=Object(a.useState)(!1),ie=Object(u.a)(ae,2),se=ie[0],re=ie[1];Object(a.useEffect)((function(){var e=O.current,t=e.clientWidth,n=e.clientHeight,c=Math.floor(n/100),a=Math.floor(t/100);N("100px ".repeat(c)),E("100px ".repeat(a));for(var i=e.children,s=0;s<i.length;s++)i[s].style.gridRowStart=Math.floor(s/a)+1,i[s].style.gridColumnStart=(s+1)%a||a})),Object(a.useEffect)((function(){Y&&(document.addEventListener("mousemove",oe),document.addEventListener("mouseup",le))}),[Y]),Object(a.useEffect)((function(){if(se){var e=Object(l.a)({},i);e[t.slice(2)].contentX=R,e[t.slice(2)].contentY=z,s(e),re(!1)}}),[se,i,t,R,z,s]);var oe=function(e){e.preventDefault(),v.current&&(J(Math.min(Math.max(0,e.pageY-Y),document.body.clientHeight-v.current.offsetHeight)),W(Math.min(Math.max(0,e.pageX-A),document.body.clientWidth-v.current.offsetWidth)))},le=function e(t){t.preventDefault(),F(0),I(0),_("droppable contents"),re(!0),document.removeEventListener("mousemove",oe),document.removeEventListener("mouseup",e)},ue=n.map((function(e){return i[e].type?Object(c.jsx)(x,{id:e,top:i[e].top,left:i[e].left,title:i[e].title,parent:i[e].parent,webViewLink:i[e].webViewLink,iconLink:i[e].iconLink,folders:i,setFolders:s,accessToken:m,dimensions:f},e):Object(c.jsx)(g,{id:e,top:i[e].top,left:i[e].left,title:i[e].title,children:i[e].children,parent:i[e].parent,folders:i,setFolders:s,dimensions:f,opened:b,setOpened:j},e)}));return Object(c.jsxs)("div",{ref:v,className:"contents-container",onMouseDown:function(e){return function(e){"close-button"!==e.target.className&&"folder-image"!==e.target.className&&"file-image"!==e.target.className&&document.querySelector(".App").appendChild(v.current)}(e)},style:{display:"grid",top:Math.min(z,f.height-ne-5),left:Math.min(R,f.width-Z-5),width:"".concat(Z,"px"),height:"".concat(ne,"px")},children:[Object(c.jsx)(h,{id:t,width:Z,setWidth:$,height:ne,setHeight:ce,setX:W,setY:J,folders:i,setFolders:s}),Object(c.jsx)("div",{className:"contents-handle",onMouseDown:function(e){return function(e){"close-button"!==e.target.className&&(_("contents"),document.querySelector(".App").appendChild(v.current),F(e.pageX-e.target.getBoundingClientRect().left),I(e.pageY-e.target.getBoundingClientRect().top))}(e)},children:Object(c.jsx)("div",{className:"close-button",onClick:function(){return function(){var e=Number(t.slice(2));j((function(t){return t.filter((function(t){return t!==e}))}))}()},children:"\u2716"})}),Object(c.jsx)("div",{id:t,ref:O,className:G,style:{gridTemplateColumns:C,gridTemplateRows:S,width:"".concat(Z,"px"),height:"".concat(ne-15,"px")},children:ue})]})}var w=n(5),S=(n(36),n(15)),N=n(16);function k(e){var t=e.closeSearch,n=e.setCloseSearch,i=e.driveDocuments,s=e.setDriveDocuments,r=e.folders,o=e.setFolders,l=e.dimensions,d=Object(a.useRef)(null),p=Object(a.useState)("fsb"),f=Object(u.a)(p,2),b=f[0],j=f[1],g=Object(a.useState)("results-closed"),h=Object(u.a)(g,2),O=h[0],v=h[1],y=Object(a.useState)(0),k=Object(u.a)(y,2),M=k[0],C=k[1];Object(a.useEffect)((function(){t&&(j("fsb"),n(!1),v("results-closed"))}));var E=function(e){C("right"===e?(M+1)%i.length:M?(M-1)%i.length:i.length-1)},D=Object(a.useCallback)(Object(m.debounce)((function(e){return L(e)}),500),[]),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?w.a.client.drive.files.list({pageSize:10,fields:"nextPageToken, files(kind, id, name, webViewLink, iconLink, mimeType)",q:e}).then((function(e){var t=JSON.parse(e.body);s(t.files)})):s([])};return Object(c.jsxs)("div",{className:"fsb-container keep-open",onClick:function(e){return function(e){"left-arrow"!==e.target.className&&"right-arrow"!==e.target.className&&"fsb-input"!==e.target.className&&"results-open"!==e.target.className&&"input"!==e.target.id&&(C(0),s([]),j("fsb-open"),v("results-open"),d.current.value="",d.current.focus())}(e)},children:[Object(c.jsx)("div",{className:"fsb-left"}),"results-closed"===O?Object(c.jsx)("div",{className:"center-search",children:Object(c.jsx)(S.a,{icon:N.a})}):null,Object(c.jsx)("div",{className:b,children:Object(c.jsx)("input",{ref:d,className:"fsb-input",onChange:function(e){return function(e){D(e.target.value.length?"name contains '".concat(e.target.value,"'"):null)}(e)}})}),Object(c.jsx)("div",{className:"fsb-right"}),i[M]?Object(c.jsxs)("div",{id:O,className:O,children:[Object(c.jsx)("div",{className:"left-arrow",onClick:function(){return E("left")}}),Object(c.jsx)("div",{id:"results-container",className:"results-container",children:function(){if(i[M]){var e=i[M],t=e.id,a=e.name,s=e.webViewLink,u=e.iconLink;return Object(c.jsx)(x,{id:t,title:a,folders:r,left:null,top:null,parent:"search",setFolders:o,setCloseSearch:n,searchItem:!0,webViewLink:s,iconLink:u,dimensions:l})}}()}),Object(c.jsx)("div",{className:"right-arrow",onClick:function(){return E("right")}})]}):null]})}n(40),n(41);var M=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"];function C(e){var t=e.folders,n=e.setFolders,i=e.accessToken,s=e.setAccessToken,r=e.signedInUser,o=e.setSignedInUser,l=Object(a.useState)(!1),d=Object(u.a)(l,2),p=d[0],f=d[1],b=Object(a.useState)(null),j=Object(u.a)(b,2),m=j[0],g=j[1];Object(a.useEffect)((function(){var e;r?(e="nerwer_data",w.a.client.drive.files.list({spaces:"appDataFolder",fields:"files(id, name, modifiedTime)"}).execute((function(c){var a=c.files.find((function(t){return t.name===e}));a?w.a.client.drive.files.get({fileId:a.id,alt:"media"}).then((function(e){n(JSON.parse(e.body)),g(a.id),f(!0)})):function(){var e=new Blob([JSON.stringify(t)],{type:"text/javascript"}),n={name:"nerwer_data",mimeType:"text/javascript",parents:["appDataFolder"]},c=new FormData;c.append("metadata",new Blob([JSON.stringify(n)],{type:"application/json"})),c.append("file",e);var a=new XMLHttpRequest;a.open("post","https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id"),a.setRequestHeader("Authorization","Bearer "+i),a.responseType="json",a.onload=function(){console.log(a.response.id)},a.send(c)}()}))):v()}),[r]),Object(a.useEffect)((function(){if(p&&m&&i){var e=new XMLHttpRequest;e.open("PATCH","https://www.googleapis.com/upload/drive/v3/files/"+m+"?uploadType=media"),e.setRequestHeader("Authorization","Bearer "+i),e.responseType="json",e.send(JSON.stringify(t))}}),[t,p,m,i]);var h=function(e){if(e){var t=w.a.auth2.getAuthInstance();o(t.currentUser.je.Qt);var n=Object.keys(t.currentUser)[0],c=Object.keys(t.currentUser[n])[1];s(t.currentUser[n][c].access_token)}},O=function(){w.a.client.init({apiKey:"AIzaSyDMu1ATbmk6cgoJhD5oGeRihOsP314WOjY",clientId:"329272270753-d5i7eltc431nqf4q57lg129aujr0fl0b.apps.googleusercontent.com",discoveryDocs:M,scope:"https://www.googleapis.com/auth/drive  https://www.googleapis.com/auth/drive.appdata"}).then((function(){w.a.auth2.getAuthInstance().isSignedIn.listen(h),h(w.a.auth2.getAuthInstance().isSignedIn.get())}),(function(e){alert(JSON.stringify(e,null,2))}))},v=function(){w.a.load("client:auth2",O)};return Object(c.jsxs)("div",{className:"auth-container",children:[r?Object(c.jsx)("button",{className:"center",onClick:function(){return w.a.auth2.getAuthInstance().signOut(),void o(null)},children:Object(c.jsx)(S.a,{icon:N.b})}):Object(c.jsx)("button",{onClick:function(){w.a.auth2.getAuthInstance().signIn()},children:"Authorize"}),r?" to lose said functionality!":" to gain said functionality!"]})}function E(e){var t=e.signedInUser,n=e.setSignedInUser,a=e.folders,i=e.setFolders,s=e.accessToken,r=e.setAccessToken;return Object(c.jsxs)("div",{className:t?"greeting-closed":"greeting-opened",children:[Object(c.jsx)("span",{className:"greeting-close",children:"\u2716"}),Object(c.jsx)("br",{}),"Welcome to (your) myDesktop: a desktop for Google Drive!",Object(c.jsx)("br",{}),"Use it like your OS desktop",Object(c.jsx)("br",{}),Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:"Drag and drop and nest files and folders"}),Object(c.jsx)("li",{children:"Right click for context menu"}),Object(c.jsx)("li",{children:"Search your drive by clicking on the search button and querying in the input field"})]}),Object(c.jsx)("br",{}),"By authorizing, you are allowing myDesktop to access your Drive through Google DriveAPI. This allows you to search your documents and organize them within the myDesktop UI. Additionally, when you rename your documents on myDesktop, a patch request is sent to your drive to update it there as well. Lastly, your document and folder positions are saved so you can return where you left off.",Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)(C,{folders:a,setFolders:i,accessToken:s,setAccessToken:r,signedInUser:t,setSignedInUser:n})]})}var D=function(){var e,t=Object(a.useState)(null),n=Object(u.a)(t,2),i=n[0],s=n[1],r=Object(a.useState)(!1),d=Object(u.a)(r,2),f=d[0],b=d[1],j=Object(a.useState)("App background-1"),m=Object(u.a)(j,2),h=m[0],O=m[1],v=Object(a.useState)("0px"),w=Object(u.a)(v,2),S=w[0],N=w[1],M=Object(a.useState)("0px"),C=Object(u.a)(M,2),D=C[0],L=C[1],A=Object(a.useState)("right-reveal"),F=Object(u.a)(A,2),T=F[0],X=F[1],Y=Object(a.useState)("new-location"),I=Object(u.a)(Y,2),B=I[0],H=I[1],R=Object(a.useState)("none"),W=Object(u.a)(R,2),q=W[0],U=W[1],z=Object(a.useState)([]),J=Object(u.a)(z,2),P=J[0],V=J[1],G=Object(a.useState)([]),_=Object(u.a)(G,2),K=_[0],Q=_[1],Z=Object(a.useState)(!1),$=Object(u.a)(Z,2),ee=$[0],te=$[1],ne=Object(a.useState)([]),ce=Object(u.a)(ne,2),ae=ce[0],ie=ce[1],se=Object(a.useState)({}),re=Object(u.a)(se,2),oe=re[0],le=re[1],ue=Object(a.useState)(null),de=Object(u.a)(ue,2),pe=de[0],fe=de[1],be=Object(a.useState)({height:window.innerHeight,width:window.innerWidth}),je=Object(u.a)(be,2),me=je[0],ge=je[1];Object(a.useEffect)((function(){function e(){ge({height:window.innerHeight,width:window.innerWidth})}return window.addEventListener("resize",e),function(t){window.removeEventListener("resize",e)}})),Object(a.useEffect)((function(){H("new-location")}),[B]);var he=function(e,t){var n=Object(l.a)({},oe),c={x:300+15*t,y:300-15*t};oe[e].contentX=c.x,oe[e].contentY=c.y,le(n)};return Object(c.jsxs)("div",{id:"App",className:h,onClick:function(e){return function(e){e.preventDefault(),U("none"),e.target.closest(".keep-open")||te(!0)}(e)},onContextMenu:function(e){return function(e){e.preventDefault(),U("block"),H("contextmenu"),e.clientX>window.innerWidth/4*3?(e.clientY>window.innerHeight/4*3?X("left-reveal bottom"):X("left-reveal"),N(e.clientY+"px"),L(e.clientX+160+"px")):(e.clientY>window.innerHeight/4*3?X("right-reveal bottom"):X("right-reveal"),N(e.clientY+"px"),L(e.clientX+5+"px")),"folder-image"===e.target.className?V([{type:"li",text:"Delete Folder",id:e.target.id}]):"file-image"===e.target.className?V([{type:"li",text:"Delete File",id:e.target.id}]):V([{type:"li",text:"New Folder",id:"nf-".concat(e.target.id)},{type:"li with context",text:"Change Background",array:[{type:"li",text:"Classic Windows"},{type:"li",text:"Oranges"},{type:"li",text:"Sky"}]}])}(e)},children:[Object(c.jsx)(E,(e={displayGreeting:f,setDisplayGreeting:b,folders:oe,setFolders:le,accessToken:pe,setAccessToken:fe},Object(o.a)(e,"setDisplayGreeting",b),Object(o.a)(e,"signedInUser",i),Object(o.a)(e,"setSignedInUser",s),e)),Object(c.jsx)("div",{style:{display:q,position:"fixed",top:S,left:D,flexDirection:"row-reverse",zIndex:"10000"},children:Object(c.jsx)(p,{parentClassName:B,directionReveal:T,folders:oe,setFolders:le,array:P,setBackground:O,setOpened:Q})}),function(){console.log(oe);var e=[];for(var t in oe)null===oe[t].parent&&e.push(oe[t].type?Object(c.jsx)(x,{id:t,top:oe[t].top,left:oe[t].left,title:oe[t].title,parent:oe[t].parent,webViewLink:oe[t].webViewLink,iconLink:oe[t].iconLink,folders:oe,setFolders:le,accessToken:pe,dimensions:me},t):Object(c.jsx)(g,{id:t,top:oe[t].top,left:oe[t].left,title:oe[t].title,folders:oe,setFolders:le,parent:null,dimensions:me,opened:K,setOpened:Q},t));return e}(),K.map((function(e,t){return null===oe[e].contentX&&he(e,t),Object(c.jsx)(y,{id:"c-".concat(e),children:oe[e].children,folders:oe,setFolders:le,contentX:oe[e].contentX,contentY:oe[e].contentY,contentWidth:oe[e].contentWidth,contentHeight:oe[e].contentHeight,dimensions:me,opened:K,setOpened:Q,accessToken:pe},"c-".concat(e))})),Object(c.jsx)(k,{closeSearch:ee,setCloseSearch:te,driveDocuments:ae,setDriveDocuments:ie,folders:oe,setFolders:le,dimensions:me})]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),i(e),s(e)}))};r.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(D,{})}),document.getElementById("root")),L()}},[[42,1,2]]]);
//# sourceMappingURL=main.897cd69c.chunk.js.map